<ion-view view-title="{{message['decoded_subject_header']}}">
    <ion-content class="padding">
        <div message-queue></div>

        <div class="list card">

            <div class="item item-avatar">
                <div class="icon-se icon-rejected">S</div>

                <h2>{{message['decoded_subject_header']}}</h2>
                <p>{{message['datestamp']}}</p>
                <p>{{message['classification_details']}} - {{message.status}}</p>
                <p>{{message.details['meta_data'].size}}</p>

                <table border="0">
                    <tr><td style="padding: 0 5px;">From:</td><td>{{message['sender']}}</td></tr>
                    <tr><td style="padding: 0 5px;">To:</td><td>{{message['recipient']}}</td></tr>
                </table>
            </div>

            <div class="item tabs tabs-secondary tabs-icon-left" on-tap="toggleRaw()" ng-if="message.details['msgBody']">
                <div class="tab-item">
                    <i class="icon ion-android-mail"></i>
                  <span ng-show="!showRaw">
                      Show raw message
                  </span>
                  <span ng-show="showRaw">
                      Hide raw message
                  </span>
                </div>
            </div>

            <div class="item item-body" ng-if="message.details['msgBody'] && showRaw">
                <pre>{{message.details['eml']}}</pre>
            </div>

            <div class="item item-body" ng-if="message.details['msgBody'] && !showRaw">
                {{message.details['msgBody']}}
            </div>


            <div class="item item-body text-center" ng-if="!message.details">
                <ion-spinner></ion-spinner>
            </div>
        </div>
    </ion-content>
    <ion-footer-bar class="bar-assertive" align-title="center">
        <div class="buttons buttons-left">
            <button class="button button-clear button-icon ion-reply" on-tap="back()">&nbsp;Back</button>
        </div>
        <div class="title" on-tap="processAction()" ng-if="hasActions && message.details['msgBody']"><i class="icon ion-grid"></i></div>
        <div class="buttons">
            <button class="button button-clear">&nbsp;</button>
        </div>
    </ion-footer-bar>
</ion-view>
